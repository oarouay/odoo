<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Define security groups -->
    <record id="group_marketing_employee" model="res.groups">
        <field name="name">Marketing Employee</field>
        <field name="category_id" ref="base.module_category_marketing"/>
        <field name="comment">Users can create content and schedule posts but cannot confirm them or manage campaigns.</field>
    </record>

    <record id="group_marketing_responsible" model="res.groups">
        <field name="name">Marketing Responsible</field>
        <field name="category_id" ref="base.module_category_marketing"/>
        <field name="implied_ids" eval="[(4, ref('group_marketing_employee'))]"/>
        <field name="comment">Users can manage all marketing content, confirm posts, and change campaign status.</field>
    </record>

    <!-- Administrator group already exists in Odoo as base.group_system -->

    <!-- Record rules for Marketing Employee -->
    <record id="rule_marketing_campaign_employee" model="ir.rule">
        <field name="name">Marketing Employee: Read-only access to campaigns</field>
        <field name="model_id" ref="ai_mailing.model_marketing_campaign"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_marketing_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Record rules for social posts - employees can create but not confirm -->
    <record id="rule_social_posts_employee" model="ir.rule">
        <field name="name">Marketing Employee: Create but not confirm social posts</field>
        <field name="model_id" ref="ai_mailing.model_social_facebook"/>
        <field name="domain_force">[('scheduling_status', 'in', ['draft'])]</field>
        <field name="groups" eval="[(4, ref('group_marketing_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_social_instagram_employee" model="ir.rule">
        <field name="name">Marketing Employee: Create but not confirm Instagram posts</field>
        <field name="model_id" ref="ai_mailing.model_social_instagram"/>
        <field name="domain_force">[('scheduling_status', 'in', ['draft'])]</field>
        <field name="groups" eval="[(4, ref('group_marketing_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_social_x_employee" model="ir.rule">
        <field name="name">Marketing Employee: Create but not confirm X posts</field>
        <field name="model_id" ref="ai_mailing.model_social_x"/>
        <field name="domain_force">[('scheduling_status', 'in', ['draft'])]</field>
        <field name="groups" eval="[(4, ref('group_marketing_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_social_email_employee" model="ir.rule">
        <field name="name">Marketing Employee: Create but not confirm emails</field>
        <field name="model_id" ref="ai_mailing.model_social_email"/>
        <field name="domain_force">[('mail_scheduling_status', 'in', ['draft'])]</field>
        <field name="groups" eval="[(4, ref('group_marketing_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Record rules for Marketing Responsible - full access to all marketing content -->
    <record id="rule_marketing_campaign_responsible" model="ir.rule">
        <field name="name">Marketing Responsible: Full access to campaigns</field>
        <field name="model_id" ref="ai_mailing.model_marketing_campaign"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_marketing_responsible'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_social_posts_responsible" model="ir.rule">
        <field name="name">Marketing Responsible: Full access to social posts</field>
        <field name="model_id" ref="ai_mailing.model_social_facebook"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_marketing_responsible'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_social_instagram_responsible" model="ir.rule">
        <field name="name">Marketing Responsible: Full access to Instagram posts</field>
        <field name="model_id" ref="ai_mailing.model_social_instagram"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_marketing_responsible'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_social_x_responsible" model="ir.rule">
        <field name="name">Marketing Responsible: Full access to X posts</field>
        <field name="model_id" ref="ai_mailing.model_social_x"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_marketing_responsible'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_social_email_responsible" model="ir.rule">
        <field name="name">Marketing Responsible: Full access to emails</field>
        <field name="model_id" ref="ai_mailing.model_social_email"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_marketing_responsible'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
</odoo>
