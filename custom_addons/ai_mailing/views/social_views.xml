<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Social Email View -->
    <record id="view_social_email_form" model="ir.ui.view">
        <field name="name">social.email.form</field>
        <field name="model">social.email</field>
        <field name="arch" type="xml">
            <form string="Email Post">
                <header>
                        <button name="action_confirm" type="object" string="Confirm" invisible="mail_scheduling_status != 'draft'"
                            class="oe_highlight"/>
                        <button name="action_confirm" type="object" string="Re try" invisible="mail_scheduling_status != 'failed'"
                            class="oe_highlight"/>
                        <button name="action_cancel" type="object" string="Cancel" invisible="mail_scheduling_status == 'draft' or mail_scheduling_status == 'sent' or mail_scheduling_status == 'failed'"/>
                        <field name="mail_scheduling_status" widget="statusbar" options="{'statusbar_visible': ['draft', 'scheduled', 'sent', 'failed']}"/>
                </header>
                <sheet>
            <sheet>
                <group>
                    <group>
                        <field name="name"/>
                        <field name="publish_date"/>
                    </group>
                    <group>
                        <field name="recipient_ids" widget="many2many_tags"/>
                        <field name="email_addresses"/>

                    </group>
                </group>
            </sheet>
            <sheet>
                <field name="content"/>
            </sheet>
                </sheet>
        </form>
        </field>
    </record>

    <record id="view_social_email_tree" model="ir.ui.view">
        <field name="name">social.email.tree</field>
        <field name="model">social.email</field>
        <field name="arch" type="xml">
             <tree string="Emails" decoration-success="mail_scheduling_status == 'sent'" decoration-info="mail_scheduling_status == 'scheduled'" decoration-danger="mail_scheduling_status == 'failed'" decoration-muted="mail_scheduling_status == 'draft'">
                <field name="name"/>
                <field name="publish_date"/>
                <field name="mail_scheduling_status" widget="badge"
                       decoration-success="mail_scheduling_status == 'sent'"
                       decoration-info="mail_scheduling_status == 'scheduled'"
                       decoration-danger="mail_scheduling_status == 'failed'"
                       decoration-muted="mail_scheduling_status == 'draft'"/>
            </tree>
        </field>
    </record>

    <!-- X (Twitter) View -->
<record id="view_social_x_form" model="ir.ui.view">
    <field name="name">social.x.form</field>
    <field name="model">social.x</field>
    <field name="arch" type="xml">
        <form string="Tweet">
            <sheet>
                <header>
                    <button name="action_confirm" type="object" string="Confirm"
                        invisible="scheduling_status != 'draft'" class="oe_highlight"/>
                    <button name="action_confirm" type="object" string="Retry"
                        invisible="scheduling_status != 'failed'" class="oe_highlight"/>
                    <button name="action_cancel" type="object" string="Cancel"
                        invisible="scheduling_status == 'draft' or scheduling_status == 'published' or scheduling_status == 'failed'"/>
                    <field name="scheduling_status" widget="statusbar" options="{'statusbar_visible': ['draft', 'scheduled', 'published', 'failed']}"/>
                </header>
                <group>
                    <group>
                        <field name="name"/>
                        <field name="caption"/>
                        <field name="publish_date"/>
                    </group>
                    <group>
                        <field name="scheduled_tweet_id" readonly="1"/>
                        <field name="image_ids" widget="many2many_tags"/>
                    </group>
                </group>
            </sheet>
        </form>
    </field>
</record>

<record id="view_social_x_tree" model="ir.ui.view">
    <field name="name">social.x.tree</field>
    <field name="model">social.x</field>
    <field name="arch" type="xml">
        <tree string="Tweets" decoration-success="scheduling_status == 'published'" decoration-info="scheduling_status == 'scheduled'" decoration-danger="scheduling_status == 'failed'" decoration-muted="scheduling_status == 'draft'">
                <field name="name"/>
                <field name="publish_date"/>
                <field name="scheduling_status" widget="badge"
                       decoration-success="scheduling_status == 'published'"
                       decoration-info="scheduling_status == 'scheduled'"
                       decoration-danger="scheduling_status == 'failed'"
                       decoration-muted="scheduling_status == 'draft'"/>
            </tree>
    </field>
</record>

    <!-- Instagram View -->
    <record id="view_social_instagram_form" model="ir.ui.view">
        <field name="name">social.instagram.form</field>
        <field name="model">social.instagram</field>
        <field name="arch" type="xml">
            <form string="Instagram Post">
                <sheet>
                    <header>
                        <button name="action_confirm" type="object" string="Confirm" invisible="scheduling_status != 'draft'"
                            class="oe_highlight"/>
                        <button name="action_confirm" type="object" string="Re try" invisible="scheduling_status != 'failed'"
                            class="oe_highlight"/>
                        <button name="action_cancel" type="object" string="Cancel" invisible="scheduling_status == 'draft' or scheduling_status == 'published' or scheduling_status == 'failed'"/>
                        <field name="scheduling_status" widget="statusbar" options="{'statusbar_visible': ['draft', 'scheduled', 'published', 'failed']}"/>
                    </header>
                    <group>
                        <field name="name"/>
                        <field name="image_ids" widget="many2many_tags"/>
                        <field name="caption"/>
                        <field name="publish_date"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_social_instagram_tree" model="ir.ui.view">
        <field name="name">social.instagram.tree</field>
        <field name="model">social.instagram</field>
        <field name="arch" type="xml">
            <tree string="Instagram Posts" decoration-success="scheduling_status == 'published'" decoration-info="scheduling_status == 'scheduled'" decoration-danger="scheduling_status == 'failed'" decoration-muted="scheduling_status == 'draft'">
                <field name="name"/>
                <field name="publish_date"/>
                <field name="scheduling_status" widget="badge"
                       decoration-success="scheduling_status == 'published'"
                       decoration-info="scheduling_status == 'scheduled'"
                       decoration-danger="scheduling_status == 'failed'"
                       decoration-muted="scheduling_status == 'draft'"/>
            </tree>
        </field>
    </record>

    <!-- Facebook View -->
    <record id="view_social_facebook_form" model="ir.ui.view">
        <field name="name">social.facebook.form</field>
        <field name="model">social.facebook</field>
        <field name="arch" type="xml">
            <form string="Facebook Post">
                <sheet>
                    <header>
                        <button name="action_confirm" type="object" string="Confirm" invisible="scheduling_status != 'draft'"
                            class="oe_highlight"/>
                        <button name="action_confirm" type="object" string="Re try" invisible="scheduling_status != 'failed'"
                            class="oe_highlight"/>
                        <button name="action_cancel" type="object" string="Cancel" invisible="scheduling_status == 'draft' or scheduling_status == 'published' or scheduling_status == 'failed'"/>
                        <field name="scheduling_status" widget="statusbar" options="{'statusbar_visible': ['draft', 'scheduled', 'published', 'failed']}"/>
                    </header>
                    <group>
                        <field name="name"/>
                        <field name="image_ids" widget="many2many_tags"/>
                        <field name="content"/>
                        <field name="scheduled_fb_post_id" readonly="1"/>
                        <field name="publish_date"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_social_facebook_tree" model="ir.ui.view">
        <field name="name">social.facebook.tree</field>
        <field name="model">social.facebook</field>
        <field name="arch" type="xml">
            <tree string="Facebook Posts" decoration-success="scheduling_status == 'published'" decoration-info="scheduling_status == 'scheduled'" decoration-danger="scheduling_status == 'failed'" decoration-muted="scheduling_status == 'draft'">
                <field name="name"/>
                <field name="publish_date"/>
                <field name="scheduling_status" widget="badge"
                       decoration-success="scheduling_status == 'published'"
                       decoration-info="scheduling_status == 'scheduled'"
                       decoration-danger="scheduling_status == 'failed'"
                       decoration-muted="scheduling_status == 'draft'"/>
            </tree>
        </field>
    </record>

    <record id="check_publish_date_cron_insta" model="ir.cron">
        <field name="name">Instagram: Check publish date</field>
        <field name="model_id" ref="model_social_instagram"/>
        <field name="state">code</field>
        <field name="code">model.cron_publish_scheduled_posts()</field>
        <field name="interval_number">1</field>
        <field name="interval_type">minutes</field>
        <field name="numbercall">-1</field>
    </record>


    <record id="check_publish_date_cron_x" model="ir.cron">
        <field name="name">Twitter (X): Check publish date</field>
        <field name="model_id" ref="model_social_x"/>
        <field name="state">code</field>
        <field name="code">model.cron_send_scheduled_x_posts()</field>
        <field name="interval_number">1</field>
        <field name="interval_type">minutes</field>
        <field name="numbercall">-1</field>
    </record>



    <record id="check_publish_state_cron" model="ir.cron">
        <field name="name">Facebook: Check publish state</field>
        <field name="model_id" ref="model_social_facebook"/>
        <field name="state">code</field>
        <field name="code">model.cron_publish_scheduled_posts()</field>
        <field name="interval_number">1</field>
        <field name="interval_type">minutes</field>
        <field name="numbercall">-1</field>
    </record>

    <record id="check_publish_date_cron" model="ir.cron">
        <field name="name">Email: Check publish state</field>
        <field name="model_id" ref="model_social_email"/>
        <field name="state">code</field>
        <field name="code">model.cron_check_status_emails()</field>
        <field name="interval_number">1</field>
        <field name="interval_type">minutes</field>
        <field name="numbercall">-1</field>
    </record>

    <!-- Social Email Search View -->
    <record id="view_social_email_search" model="ir.ui.view">
    <field name="name">social.email.search</field>
    <field name="model">social.email</field>
    <field name="arch" type="xml">
        <search string="Search Emails">
            <field name="name"/>
            <group expand="0" string="Group By">
                <filter string="Status" name="groupby_status" context="{'group_by': 'mail_scheduling_status'}"/>
            </group>
            <separator/>
            <filter string="Draft" name="draft" domain="[('mail_scheduling_status', '=', 'draft')]"/>
            <filter string="Scheduled" name="scheduled" domain="[('mail_scheduling_status', '=', 'scheduled')]"/>
            <filter string="Sent" name="sent" domain="[('mail_scheduling_status', '=', 'sent')]"/>
            <filter string="Failed" name="failed" domain="[('mail_scheduling_status', '=', 'failed')]"/>
        </search>
    </field>
</record>

    <!-- Social X (Twitter) Search View -->
    <record id="view_social_x_search" model="ir.ui.view">
    <field name="name">social.x.search</field>
    <field name="model">social.x</field>
    <field name="arch" type="xml">
        <search string="Search X Posts">
            <field name="name"/>
            <group expand="0" string="Group By">
                <filter string="Status" name="groupby_status" context="{'group_by': 'scheduling_status'}"/>
            </group>
            <separator/>
            <filter string="Draft" name="draft" domain="[('scheduling_status', '=', 'draft')]"/>
            <filter string="Scheduled" name="scheduled" domain="[('scheduling_status', '=', 'scheduled')]"/>
            <filter string="Published" name="published" domain="[('scheduling_status', '=', 'published')]"/>
            <filter string="Failed" name="failed" domain="[('scheduling_status', '=', 'failed')]"/>
        </search>
    </field>
</record>

    <!-- Social Instagram Search View -->
    <record id="view_social_instagram_search" model="ir.ui.view">
    <field name="name">social.instagram.search</field>
    <field name="model">social.instagram</field>
    <field name="arch" type="xml">
        <search string="Search Instagram Posts">
            <field name="name"/>
            <group expand="0" string="Group By">
                <filter string="Status" name="groupby_status" context="{'group_by': 'scheduling_status'}"/>
            </group>
            <separator/>
            <filter string="Draft" name="draft" domain="[('scheduling_status', '=', 'draft')]"/>
            <filter string="Scheduled" name="scheduled" domain="[('scheduling_status', '=', 'scheduled')]"/>
            <filter string="Published" name="published" domain="[('scheduling_status', '=', 'published')]"/>
            <filter string="Failed" name="failed" domain="[('scheduling_status', '=', 'failed')]"/>
        </search>
    </field>
</record>

    <!-- Social Facebook Search View -->
    <record id="view_social_facebook_search" model="ir.ui.view">
    <field name="name">social.facebook.search</field>
    <field name="model">social.facebook</field>
    <field name="arch" type="xml">
        <search string="Search Facebook Posts">
            <field name="name"/>
            <group expand="0" string="Group By">
                <filter string="Status" name="groupby_status" context="{'group_by': 'scheduling_status'}"/>
            </group>
            <separator/>
            <filter string="Draft" name="draft" domain="[('scheduling_status', '=', 'draft')]"/>
            <filter string="Scheduled" name="scheduled" domain="[('scheduling_status', '=', 'scheduled')]"/>
            <filter string="Published" name="published" domain="[('scheduling_status', '=', 'published')]"/>
            <filter string="Failed" name="failed" domain="[('scheduling_status', '=', 'failed')]"/>
        </search>
    </field>
</record>

</odoo>
